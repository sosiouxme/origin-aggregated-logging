searchguard.ssl.transport.http.enabled: true

cluster:
  name: ${CLUSTER_NAME}

script:
  disable_dynamic: false

discovery:
  zen:
    ping:
      multicast:
        enabled: false

cloud:
  k8s:
    servicedns: ${SERVICE_DNS}

discovery:
  type: io.fabric8.elasticsearch.discovery.k8s.K8sDiscoveryModule

path:
  data: /elasticsearch/persistent/${CLUSTER_NAME}/data
  logs: /elasticsearch/${CLUSTER_NAME}/logs
  work: /elasticsearch/${CLUSTER_NAME}/work

searchguard:
  key_path: /elasticsearch/${CLUSTER_NAME}
  allow_all_from_loopback: false
  authentication:
    authentication_backend:
      impl: com.floragunn.searchguard.authentication.backend.simple.SettingsBasedAuthenticationBackend
    authorizer:
      impl: com.floragunn.searchguard.authorization.simple.SettingsBasedAuthorizator
    http_authenticator:
      impl: com.floragunn.searchguard.authentication.http.basic.HTTPBasicAuthenticator
    settingsdb:
      user:
        admin: secret
        fluentd: changeme
        kibana: changeme
    authorization:
      settingsdb:
        roles:
          admin: ["root"]
          fluentd: ["fluentd"]
          kibana: ["kibana"]
  ssl:
    transport:
      http:
        keystore_type: JKS
        keystore_filepath: /etc/elasticsearch/keys/key
        keystore_password: kspass
        enforce_clientauth: true
        truststore_type: JKS
        truststore_filepath: /etc/elasticsearch/keys/truststore
        truststore_password: tspass
  actionrequestfilter:
    names: ["readonly", "fluentd", "kibana"]
    readonly:
      allowed_actions: ["indices:data/read/*", "*monitor*"]
      forbidden_actions: ["cluster:*", "indices:admin*"]
    fluentd:
      allowed_actions: ["indices:data/write/*", "indices:admin/create"]
    kibana:
      allowed_actions: ["indices:data/read/*", "*monitor*", "indices:admin/read", "indices:admin/mappings/fields/get*"]
